"use strict";(()=>{var e={};e.id=569,e.ids=[569],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3195:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>y,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>l});var r={};a.r(r),a.d(r,{POST:()=>u});var s=a(9303),o=a(8716),i=a(3131),n=a(7070),p=a(3493);async function u(e){try{let t=await e.json();if(console.log("Received application data:",t),!t.name||!t.email||!t.phone||!t.roomType||!t.course||!t.yearOfStudy||!t.nsfasFunded)return n.NextResponse.json({success:!1,error:"Missing required fields"},{status:400});let a=await p._.application.create({data:{name:t.name,idNumber:t.idNumber||null,email:t.email,phone:t.phone,roomType:t.roomType,course:t.course,yearOfStudy:t.yearOfStudy,nsfasStatus:"yes"===t.nsfasFunded,status:"pending"}});return n.NextResponse.json({success:!0,id:a.id},{status:201})}catch(e){return console.error("Error creating application:",e),console.error("Error details:",{message:e?.message,code:e?.code,meta:e?.meta}),n.NextResponse.json({success:!1,error:e?.message||"Failed to submit application",details:void 0},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/applications/route",pathname:"/api/applications",filename:"route",bundlePath:"app/api/applications/route"},resolvedPagePath:"C:\\AssortedApps\\ConcordiaHouse\\app\\api\\applications\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:l,serverHooks:m}=d,g="/api/applications/route";function y(){return(0,i.patchFetch)({serverHooks:m,staticGenerationAsyncStorage:l})}},3493:(e,t,a)=>{a.d(t,{_:()=>s});let r=require("@prisma/client"),s=globalThis.prisma??new r.PrismaClient}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[276,972],()=>a(3195));module.exports=r})();